"use strict";(globalThis.webpackChunkmy_docusaurus_project=globalThis.webpackChunkmy_docusaurus_project||[]).push([[2461],{1527:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>h,contentTitle:()=>o,default:()=>p,frontMatter:()=>c,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"module-2/unity-ros2-bridge","title":"2.5 Connecting Worlds: The Unity-ROS 2 Bridge","description":"How Unity Talks to ROS","source":"@site/docs/module-2/05-unity-ros2-bridge.mdx","sourceDirName":"module-2","slug":"/module-2/unity-ros2-bridge","permalink":"/phys-ai-book/docs/module-2/unity-ros2-bridge","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"2.4 High-Fidelity Visualization: Unity Engine","permalink":"/phys-ai-book/docs/module-2/visual-rendering-unity"},"next":{"title":"2.6 Building the World: Environment Design","permalink":"/phys-ai-book/docs/module-2/creating-environments"}}');var a=n(4848),r=n(8453),t=n(3715),l=n(4021);const c={},o="2.5 Connecting Worlds: The Unity-ROS 2 Bridge",h={},d=[{value:"How Unity Talks to ROS",id:"how-unity-talks-to-ros",level:2},{value:"Step 1: Setting up the ROS Side",id:"step-1-setting-up-the-ros-side",level:3},{value:"Step 2: Setting up the Unity Side",id:"step-2-setting-up-the-unity-side",level:3},{value:"Step 3: Sending a Message (Publisher)",id:"step-3-sending-a-message-publisher",level:3},{value:"Message Serialization &amp; Latency Management",id:"message-serialization--latency-management",level:2},{value:"URDF Import Pipeline",id:"urdf-import-pipeline",level:3},{value:"Coordinate Systems: The Handedness Trap",id:"coordinate-systems-the-handedness-trap",level:3},{value:"Dunyaon Ka Milaap: Unity-ROS 2 Bridge",id:"dunyaon-ka-milaap-unity-ros-2-bridge",level:2},{value:"Step 1: ROS Side Setup",id:"step-1-ros-side-setup",level:3},{value:"Step 2: Unity Side Setup",id:"step-2-unity-side-setup",level:3},{value:"Step 3: Message Bhejna (Publisher)",id:"step-3-message-bhejna-publisher",level:3},{value:"Message Serialization aur Latency",id:"message-serialization-aur-latency",level:2},{value:"URDF Import Pipeline",id:"urdf-import-pipeline-1",level:3},{value:"Coordinate Systems: Dayein aur Bayein ka Farq",id:"coordinate-systems-dayein-aur-bayein-ka-farq",level:3}];function m(e){const s={annotation:"annotation",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",math:"math",mermaid:"mermaid",mi:"mi",mo:"mo",mrow:"mrow",msub:"msub",ol:"ol",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(s.header,{children:(0,a.jsx)(s.h1,{id:"25-connecting-worlds-the-unity-ros-2-bridge",children:"2.5 Connecting Worlds: The Unity-ROS 2 Bridge"})}),"\n",(0,a.jsxs)(t.A,{level:"novice",language:"english",children:[(0,a.jsx)(s.h2,{id:"how-unity-talks-to-ros",children:"How Unity Talks to ROS"}),(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"The Language Barrier"}),"\nUnity uses ",(0,a.jsx)(s.strong,{children:"C#"})," (C-Sharp). ROS 2 uses ",(0,a.jsx)(s.strong,{children:"Python/C++"}),". They cannot talk directly.\nWe need a translator. We use the ",(0,a.jsx)(s.strong,{children:"ROS-TCP-Connector"}),"."]}),(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"The Architecture"}),"\nImagine a telephone wire between Unity and ROS."]}),(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"ROS Endpoint"}),': A node running in your terminal that acts as the "Server".']}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Unity Client"}),": A script in Unity that connects to that server."]}),"\n"]}),(0,a.jsx)(s.mermaid,{value:"graph LR;\n    A[Unity Object] -- C# Script --\x3e B[TCP Connector];\n    B -- Network 10000 --\x3e C[ROS Endpoint Node];\n    C -- Topic --\x3e D[ROS 2 Network];"}),(0,a.jsx)(s.h3,{id:"step-1-setting-up-the-ros-side",children:"Step 1: Setting up the ROS Side"}),(0,a.jsx)(s.p,{children:"We need to install the endpoint package."}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"# Clone the repository\ncd ~/ros2_ws/src\ngit clone https://github.com/Unity-Technologies/ROS-TCP-Endpoint.git\n\n# Build\ncd ~/ros2_ws\ncolcon build\nsource install/setup.bash\n\n# Run the endpoint\nros2 run ros_tcp_endpoint default_server_endpoint --ros-args -p ROS_IP:=0.0.0.0\n"})}),(0,a.jsxs)(s.p,{children:["You will see: ",(0,a.jsx)(s.code,{children:"Starting server on port 10000"}),". It is now listening."]}),(0,a.jsx)(s.h3,{id:"step-2-setting-up-the-unity-side",children:"Step 2: Setting up the Unity Side"}),(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:["In Unity, go to ",(0,a.jsx)(s.code,{children:"Window > Package Manager"}),"."]}),"\n",(0,a.jsxs)(s.li,{children:["Click ",(0,a.jsx)(s.code,{children:"+"})," -> ",(0,a.jsx)(s.code,{children:"Add package from git URL"}),"."]}),"\n",(0,a.jsxs)(s.li,{children:["Enter: ",(0,a.jsx)(s.code,{children:"https://github.com/Unity-Technologies/ROS-TCP-Connector.git?path=/com.unity.robotics.ros-tcp-connector"}),"."]}),"\n",(0,a.jsxs)(s.li,{children:["A new menu item ",(0,a.jsx)(s.strong,{children:"Robotics"})," will appear in the top bar."]}),"\n",(0,a.jsxs)(s.li,{children:["Go to ",(0,a.jsx)(s.code,{children:"Robotics > ROS Settings"}),". Set the IP address of your ROS computer (or ",(0,a.jsx)(s.code,{children:"127.0.0.1"})," if it's the same machine)."]}),"\n"]}),(0,a.jsx)(s.h3,{id:"step-3-sending-a-message-publisher",children:"Step 3: Sending a Message (Publisher)"}),(0,a.jsx)(s.p,{children:"Let's make a cube tell ROS its position."}),(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:"Create a Cube."}),"\n",(0,a.jsxs)(s.li,{children:["Create a new script ",(0,a.jsx)(s.code,{children:"CubePublisher.cs"}),"."]}),"\n"]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-csharp",children:'using UnityEngine;\nusing Unity.Robotics.ROSTCPConnector;\nusing RosMessageTypes.Geometry; // Standard ROS messages\n\npublic class CubePublisher : MonoBehaviour\n{\n    ROSConnection ros;\n    public string topicName = "cube_pose";\n\n    void Start() {\n        ros = ROSConnection.GetOrCreateInstance();\n        ros.RegisterPublisher<PoseMsg>(topicName);\n    }\n\n    void Update() {\n        PoseMsg msg = new PoseMsg();\n        // Convert Unity coordinate to ROS coordinate\n        msg.position.x = transform.position.z; \n        msg.position.y = -transform.position.x;\n        msg.position.z = transform.position.y;\n        \n        ros.Publish(topicName, msg);\n    }\n}\n'})}),(0,a.jsx)(s.p,{children:(0,a.jsx)(s.em,{children:"Note the coordinate conversion! Unity (Y-up) and ROS (Z-up) are different."})})]}),"\n",(0,a.jsxs)(t.A,{level:"expert",language:"english",children:[(0,a.jsx)(s.h2,{id:"message-serialization--latency-management",children:"Message Serialization & Latency Management"}),(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"The Cost of Serialization"})}),(0,a.jsxs)(s.p,{children:["The ROS-TCP-Connector relies on ",(0,a.jsx)(s.strong,{children:"BSON"})," or ",(0,a.jsx)(s.strong,{children:"JSON"})," serialization over TCP.\nEvery time you send a message, C# allocates memory, converts the object to bytes, sends it over the network, and Python/C++ deserializes it."]}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Latency"}),": For a 100Hz control loop, this overhead is negligible."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Bottleneck"}),": For 1080p Video (3MB per frame @ 30fps), this creates garbage collection (GC) pressure in Unity and latency spikes."]}),"\n"]}),(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Optimizing Large Data Transfer"}),"\nDo not use standard topics for Video/LIDAR over the TCP bridge if performance is critical."]}),(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Shared Memory"}),": If Unity and ROS are on the same machine, use a Named Pipe or Shared Memory segment."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Compression"}),": Compress the image (JPEG) in Unity before sending. It reduces size by 10x, trading CPU load for Network bandwidth."]}),"\n"]}),(0,a.jsx)(s.h3,{id:"urdf-import-pipeline",children:"URDF Import Pipeline"}),(0,a.jsxs)(s.p,{children:["Instead of building robots manually with cubes, we import the URDF.\nUnity provides the ",(0,a.jsx)(s.strong,{children:"URDF Importer"})," package."]}),(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"Assets > Import Robot from URDF"}),"."]}),"\n",(0,a.jsxs)(s.li,{children:["Select your ",(0,a.jsx)(s.code,{children:".urdf"})," file."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Articulation Bodies"}),": Unity 2020+ introduced ",(0,a.jsx)(s.code,{children:"ArticulationBody"})," physics component specifically for robotics.","\n",(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:["It replaces ",(0,a.jsx)(s.code,{children:"Rigidbody"})," + ",(0,a.jsx)(s.code,{children:"HingeJoint"}),"."]}),"\n",(0,a.jsx)(s.li,{children:"It uses Featherstone's algorithm (Reduced Coordinate Articulations) which is much more stable for kinematic chains than maximal coordinate joints."}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.em,{children:"Expert Tip"}),": Adjust the ",(0,a.jsx)(s.code,{children:"Solver Iterations"}),' in Project Settings > Physics if your robot arm is "floppy" or stretching.']}),"\n"]}),"\n"]}),"\n"]}),(0,a.jsx)(s.h3,{id:"coordinate-systems-the-handedness-trap",children:"Coordinate Systems: The Handedness Trap"}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Unity"}),": Left-Handed Coordinate System (Y-up, Z-forward)."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"ROS"}),": Right-Handed Coordinate System (Z-up, X-forward)."]}),"\n"]}),(0,a.jsxs)(s.p,{children:["The Connector handles basic conversion, but matrices (like Camera Intrinsics) often break.\n",(0,a.jsx)(s.strong,{children:"The Conversion Formula"}),":\nTo convert a position vector ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mo,{stretchy:"false",children:"("}),(0,a.jsx)(s.mi,{children:"x"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mi,{children:"z"}),(0,a.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"(x, y, z)"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mopen",children:"("}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"}),(0,a.jsx)(s.span,{className:"mclose",children:")"})]})})]})," from Unity to ROS:\n",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"V"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"r"}),(0,a.jsx)(s.mi,{children:"o"}),(0,a.jsx)(s.mi,{children:"s"})]})]}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsx)(s.mo,{stretchy:"false",children:"("}),(0,a.jsx)(s.mi,{children:"z"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mo,{children:"\u2212"}),(0,a.jsx)(s.mi,{children:"x"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"V_{ros} = (z, -x, y)"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8333em",verticalAlign:"-0.15em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.22222em"},children:"V"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.1514em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"-0.2222em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"ros"})})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mopen",children:"("}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord",children:"\u2212"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(s.span,{className:"mclose",children:")"})]})]})]}),"\nTo convert a Quaternion ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mo,{stretchy:"false",children:"("}),(0,a.jsx)(s.mi,{children:"x"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mi,{children:"z"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mi,{children:"w"}),(0,a.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"(x, y, z, w)"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mopen",children:"("}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(s.span,{className:"mclose",children:")"})]})})]}),":\n",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsxs)(s.msub,{children:[(0,a.jsx)(s.mi,{children:"Q"}),(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mi,{children:"r"}),(0,a.jsx)(s.mi,{children:"o"}),(0,a.jsx)(s.mi,{children:"s"})]})]}),(0,a.jsx)(s.mo,{children:"="}),(0,a.jsx)(s.mo,{stretchy:"false",children:"("}),(0,a.jsx)(s.mo,{children:"\u2212"}),(0,a.jsx)(s.mi,{children:"z"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mi,{children:"x"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mo,{children:"\u2212"}),(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mi,{children:"w"}),(0,a.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"Q_{ros} = (-z, x, -y, w)"})]})})}),(0,a.jsxs)(s.span,{className:"katex-html","aria-hidden":"true",children:[(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),(0,a.jsxs)(s.span,{className:"mord",children:[(0,a.jsx)(s.span,{className:"mord mathnormal",children:"Q"}),(0,a.jsx)(s.span,{className:"msupsub",children:(0,a.jsxs)(s.span,{className:"vlist-t vlist-t2",children:[(0,a.jsxs)(s.span,{className:"vlist-r",children:[(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.1514em"},children:(0,a.jsxs)(s.span,{style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"},children:[(0,a.jsx)(s.span,{className:"pstrut",style:{height:"2.7em"}}),(0,a.jsx)(s.span,{className:"sizing reset-size6 size3 mtight",children:(0,a.jsx)(s.span,{className:"mord mtight",children:(0,a.jsx)(s.span,{className:"mord mathnormal mtight",children:"ros"})})})]})}),(0,a.jsx)(s.span,{className:"vlist-s",children:"\u200b"})]}),(0,a.jsx)(s.span,{className:"vlist-r",children:(0,a.jsx)(s.span,{className:"vlist",style:{height:"0.15em"},children:(0,a.jsx)(s.span,{})})})]})})]}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,a.jsx)(s.span,{className:"mrel",children:"="}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mopen",children:"("}),(0,a.jsx)(s.span,{className:"mord",children:"\u2212"}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord",children:"\u2212"}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.02691em"},children:"w"}),(0,a.jsx)(s.span,{className:"mclose",children:")"})]})]})]})]})]}),"\n",(0,a.jsxs)(t.A,{level:"novice",language:"urdu",children:[(0,a.jsx)(s.h2,{id:"dunyaon-ka-milaap-unity-ros-2-bridge",children:"Dunyaon Ka Milaap: Unity-ROS 2 Bridge"}),(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Zaban Ka Masla"})}),(0,a.jsxs)(s.p,{children:["Unity ki zaban ",(0,a.jsx)(s.strong,{children:"C#"})," hai. ROS 2 ki zaban ",(0,a.jsx)(s.strong,{children:"Python"})," hai. Yeh apas mein baat nahi kar sakte.\nHumein ek tarjuman (translator) chahiye. Hum ",(0,a.jsx)(s.strong,{children:"ROS-TCP-Connector"})," use karte hain."]}),(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Architecture (Dhaancha)"}),"\nSamjhein ke Unity aur ROS ke darmiyan telephone ki taar hai."]}),(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"ROS Endpoint"}),': Terminal mein chalne wala program jo "Server" hai.']}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Unity Client"}),": Unity ka script jo us server ko call karta hai."]}),"\n"]}),(0,a.jsx)(s.mermaid,{value:"graph LR;\n    A[Unity Object] -- C# Script --\x3e B[TCP Connector];\n    B -- Network --\x3e C[ROS Endpoint Node];\n    C -- Topic --\x3e D[ROS 2 Network];"}),(0,a.jsx)(s.h3,{id:"step-1-ros-side-setup",children:"Step 1: ROS Side Setup"}),(0,a.jsx)(s.p,{children:"Humein endpoint package install karna hai."}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-bash",children:"# Code download karein\ncd ~/ros2_ws/src\ngit clone https://github.com/Unity-Technologies/ROS-TCP-Endpoint.git\n\n# Build karein\ncd ~/ros2_ws\ncolcon build\nsource install/setup.bash\n\n# Server chalayein\nros2 run ros_tcp_endpoint default_server_endpoint --ros-args -p ROS_IP:=0.0.0.0\n"})}),(0,a.jsxs)(s.p,{children:["Likha aayega: ",(0,a.jsx)(s.code,{children:"Starting server on port 10000"}),". Ab yeh sun raha hai."]}),(0,a.jsx)(s.h3,{id:"step-2-unity-side-setup",children:"Step 2: Unity Side Setup"}),(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:["Unity mein ",(0,a.jsx)(s.code,{children:"Window > Package Manager"})," par jayein."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"+"})," dabayein aur ",(0,a.jsx)(s.code,{children:"Add package from git URL"})," select karein."]}),"\n",(0,a.jsxs)(s.li,{children:["Yeh link dalein: ",(0,a.jsx)(s.code,{children:"https://github.com/Unity-Technologies/ROS-TCP-Connector.git?path=/com.unity.robotics.ros-tcp-connector"}),"."]}),"\n",(0,a.jsxs)(s.li,{children:["Upar menu mein ",(0,a.jsx)(s.strong,{children:"Robotics"})," aa jaye ga."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.code,{children:"Robotics > ROS Settings"})," mein apne computer ka IP likhein."]}),"\n"]}),(0,a.jsx)(s.h3,{id:"step-3-message-bhejna-publisher",children:"Step 3: Message Bhejna (Publisher)"}),(0,a.jsx)(s.p,{children:"Aayein ek Cube ki position ROS ko bhejein."}),(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsx)(s.li,{children:"Cube banayein."}),"\n",(0,a.jsxs)(s.li,{children:["Naya script ",(0,a.jsx)(s.code,{children:"CubePublisher.cs"})," banayein."]}),"\n"]}),(0,a.jsx)(s.pre,{children:(0,a.jsx)(s.code,{className:"language-csharp",children:'using UnityEngine;\nusing Unity.Robotics.ROSTCPConnector; // Library import ki\nusing RosMessageTypes.Geometry; \n\npublic class CubePublisher : MonoBehaviour\n{\n    ROSConnection ros;\n    public string topicName = "cube_pose";\n\n    void Start() {\n        // Connection shuru kiya\n        ros = ROSConnection.GetOrCreateInstance();\n        ros.RegisterPublisher<PoseMsg>(topicName);\n    }\n\n    void Update() {\n        PoseMsg msg = new PoseMsg();\n        // Unity ke coordinates ko ROS mein badla\n        msg.position.x = transform.position.z; \n        msg.position.y = -transform.position.x;\n        msg.position.z = transform.position.y;\n        \n        ros.Publish(topicName, msg);\n    }\n}\n'})})]}),"\n",(0,a.jsxs)(t.A,{level:"expert",language:"urdu",children:[(0,a.jsx)(s.h2,{id:"message-serialization-aur-latency",children:"Message Serialization aur Latency"}),(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Data Bhejne Ki Qeemat"})}),(0,a.jsx)(s.p,{children:'Jab Unity se data ROS jata hai, to wo pehle "Serialize" (Bytes mein convert) hota hai, phir network se guzarta hai, phir "Deserialize" hota hai.'}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Latency"}),": Chotay messages (position, speed) ke liye yeh masla nahi hai."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Masla"}),": Video (Images) ke liye yeh bohat bhari kaam hai. Agar aap HD video bhejein gay to Unity ruk ruk kar chalega (Garbage Collection spikes)."]}),"\n"]}),(0,a.jsx)(s.p,{children:(0,a.jsx)(s.strong,{children:"Bara Data Kaise Bhejein?"})}),(0,a.jsxs)(s.ol,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Compression"}),": Tasveer ko JPEG bana kar bhejein. Size 10 guna kam ho jata hai."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Shared Memory"}),": Agar dono aik hi computer par hain, to network ki bajaye Shared Memory use karein (Fastest)."]}),"\n"]}),(0,a.jsx)(s.h3,{id:"urdf-import-pipeline-1",children:"URDF Import Pipeline"}),(0,a.jsxs)(s.p,{children:["Hum Unity mein dunday aur dibbay jor kar robot nahi banate. Hum seedha URDF import karte hain.\nUnity ka ",(0,a.jsx)(s.strong,{children:"URDF Importer"})," package use karein."]}),(0,a.jsxs)(s.p,{children:[(0,a.jsx)(s.strong,{children:"Articulation Bodies"}),"\nUnity 2020+ mein ek nayi physics aayi hai: ",(0,a.jsx)(s.strong,{children:"ArticulationBody"}),"."]}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsx)(s.li,{children:"Yeh robot arms ke liye banayi gayi hai."}),"\n",(0,a.jsxs)(s.li,{children:["Pehle hum ",(0,a.jsx)(s.code,{children:"Rigidbody"})," aur ",(0,a.jsx)(s.code,{children:"HingeJoint"}),' use karte thay, jo ke aksar "dheelay" (floppy) hotay thay.']}),"\n",(0,a.jsxs)(s.li,{children:["ArticulationBody ",(0,a.jsx)(s.strong,{children:"Featherstone Algorithm"})," use karta hai jo bohat stable hai."]}),"\n"]}),(0,a.jsx)(s.h3,{id:"coordinate-systems-dayein-aur-bayein-ka-farq",children:"Coordinate Systems: Dayein aur Bayein ka Farq"}),(0,a.jsxs)(s.ul,{children:["\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"Unity"}),": Left-Handed (Y-upar, Z-aagay)."]}),"\n",(0,a.jsxs)(s.li,{children:[(0,a.jsx)(s.strong,{children:"ROS"}),": Right-Handed (Z-upar, X-aagay)."]}),"\n"]}),(0,a.jsxs)(s.p,{children:["Agar aap ne conversion formula nahi lagaya, to robot ulta ho jaye ga.\n",(0,a.jsx)(s.strong,{children:"Formula"}),":\nROS vector = ",(0,a.jsxs)(s.span,{className:"katex",children:[(0,a.jsx)(s.span,{className:"katex-mathml",children:(0,a.jsx)(s.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,a.jsxs)(s.semantics,{children:[(0,a.jsxs)(s.mrow,{children:[(0,a.jsx)(s.mo,{stretchy:"false",children:"("}),(0,a.jsx)(s.mi,{children:"z"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mo,{children:"\u2212"}),(0,a.jsx)(s.mi,{children:"x"}),(0,a.jsx)(s.mo,{separator:"true",children:","}),(0,a.jsx)(s.mi,{children:"y"}),(0,a.jsx)(s.mo,{stretchy:"false",children:")"})]}),(0,a.jsx)(s.annotation,{encoding:"application/x-tex",children:"(z, -x, y)"})]})})}),(0,a.jsx)(s.span,{className:"katex-html","aria-hidden":"true",children:(0,a.jsxs)(s.span,{className:"base",children:[(0,a.jsx)(s.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,a.jsx)(s.span,{className:"mopen",children:"("}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.04398em"},children:"z"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord",children:"\u2212"}),(0,a.jsx)(s.span,{className:"mord mathnormal",children:"x"}),(0,a.jsx)(s.span,{className:"mpunct",children:","}),(0,a.jsx)(s.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,a.jsx)(s.span,{className:"mord mathnormal",style:{marginRight:"0.03588em"},children:"y"}),(0,a.jsx)(s.span,{className:"mclose",children:")"})]})})]})," (Unity vector)."]})]}),"\n",(0,a.jsx)(l.A,{questions:[{question:"What is the role of the ROS-TCP-Endpoint node?",options:["It runs the physics simulation","It acts as a server to relay messages between Unity (Client) and the ROS 2 network","It visualizes the robot","It compiles the C# code"],correctAnswer:1},{question:"Which physics component is recommended for robots in modern Unity versions?",options:["Rigidbody","ArticulationBody","MeshCollider","SoftBody"],correctAnswer:1},{question:"Urdu: Unity aur ROS ke coordinate system mein kya bunyadi farq hai?",options:["Koi farq nahi","Unity Left-Handed (Y-up) hai, ROS Right-Handed (Z-up) hai","Unity mein gravity nahi hoti","ROS mein X-axis upar hota hai"],correctAnswer:1}]})]})}function p(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,a.jsx)(s,{...e,children:(0,a.jsx)(m,{...e})}):m(e)}}}]);