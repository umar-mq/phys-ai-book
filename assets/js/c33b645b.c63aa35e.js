"use strict";(globalThis.webpackChunkmy_docusaurus_project=globalThis.webpackChunkmy_docusaurus_project||[]).push([[2865],{9748:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>m,frontMatter:()=>c,metadata:()=>r,toc:()=>h});const r=JSON.parse('{"id":"module-1/launch-files-parameters","title":"1.6 Launch Systems & Runtime Configuration","description":"Starting the Entire Robot at Once","source":"@site/docs/module-1/launch-files-parameters.mdx","sourceDirName":"module-1","slug":"/module-1/launch-files-parameters","permalink":"/phys-ai-book/docs/module-1/launch-files-parameters","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"1.5 Structuring Intelligence: Packages & rclpy","permalink":"/phys-ai-book/docs/module-1/python-packages-rclpy"},"next":{"title":"1.7 Defining the Body: URDF & Xacro","permalink":"/phys-ai-book/docs/module-1/urdf-robot-description"}}');var s=a(4848),i=a(8453),t=a(3715),l=a(4021);const c={},o="1.6 Launch Systems & Runtime Configuration",d={},h=[{value:"Starting the Entire Robot at Once",id:"starting-the-entire-robot-at-once",level:2},{value:"Creating a Launch File",id:"creating-a-launch-file",level:3},{value:"Parameters (Tuning without Coding)",id:"parameters-tuning-without-coding",level:3},{value:"Advanced Launch Architecture &amp; Event Handling",id:"advanced-launch-architecture--event-handling",level:2},{value:"1. Event Handlers (Respawning Nodes)",id:"1-event-handlers-respawning-nodes",level:3},{value:"2. Substitutions and Launch Arguments",id:"2-substitutions-and-launch-arguments",level:3},{value:"3. Dynamic Reconfigure (Runtime Parameter Updates)",id:"3-dynamic-reconfigure-runtime-parameter-updates",level:3},{value:"Launch Files Aur Parameters",id:"launch-files-aur-parameters",level:2},{value:"Launch File Banana",id:"launch-file-banana",level:3},{value:"Parameters (Setting Badlna)",id:"parameters-setting-badlna",level:3},{value:"Advanced Launch Architecture",id:"advanced-launch-architecture",level:2},{value:"1. Event Handlers (Respawning)",id:"1-event-handlers-respawning",level:3},{value:"2. Substitutions aur Arguments",id:"2-substitutions-aur-arguments",level:3},{value:"3. Dynamic Reconfigure (Chaltay Hue Settings Badlna)",id:"3-dynamic-reconfigure-chaltay-hue-settings-badlna",level:3}];function u(e){const n={code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"16-launch-systems--runtime-configuration",children:"1.6 Launch Systems & Runtime Configuration"})}),"\n",(0,s.jsxs)(t.A,{level:"novice",language:"english",children:[(0,s.jsx)(n.h2,{id:"starting-the-entire-robot-at-once",children:"Starting the Entire Robot at Once"}),(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["The Problem with ",(0,s.jsx)(n.code,{children:"ros2 run"})]})}),(0,s.jsx)(n.p,{children:"So far, we have opened a new terminal tab for every node."}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Tab 1: Talker"}),"\n",(0,s.jsx)(n.li,{children:"Tab 2: Listener"}),"\n",(0,s.jsx)(n.li,{children:"Tab 3: Camera"}),"\n",(0,s.jsx)(n.li,{children:"Tab 4: Motor Driver"}),"\n"]}),(0,s.jsxs)(n.p,{children:["A real humanoid robot has 100+ nodes. You cannot open 100 tabs. You need a ",(0,s.jsx)(n.strong,{children:"Launch File"}),".\nA Launch File is a Python script that starts many nodes at once."]}),(0,s.jsx)(n.h3,{id:"creating-a-launch-file",children:"Creating a Launch File"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Inside your package, create a folder named ",(0,s.jsx)(n.code,{children:"launch"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Create a file ",(0,s.jsx)(n.code,{children:"my_robot.launch.py"}),"."]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        # Node 1: The Publisher\n        Node(\n            package='my_robot_controller',\n            executable='talker_node',\n            name='my_talker'\n        ),\n        # Node 2: The Subscriber\n        Node(\n            package='my_robot_controller',\n            executable='listener_node',\n            name='my_listener'\n        )\n    ])\n"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"How to run it:"}),"\nFirst, you must edit ",(0,s.jsx)(n.code,{children:"setup.py"})," to tell ROS where the launch files are."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"# In setup.py imports\nimport os\nfrom glob import glob\n\n# In data_files list\n(os.path.join('share', package_name, 'launch'), glob('launch/*.launch.py')),\n"})}),(0,s.jsx)(n.p,{children:"Then build and run:"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"colcon build\nsource install/setup.bash\nros2 launch my_robot_controller my_robot.launch.py\n"})}),(0,s.jsxs)(n.p,{children:["This will start both nodes instantly in one terminal. ",(0,s.jsx)(n.code,{children:"Ctrl+C"})," stops them all."]}),(0,s.jsx)(n.h3,{id:"parameters-tuning-without-coding",children:"Parameters (Tuning without Coding)"}),(0,s.jsx)(n.p,{children:"Imagine you want to change the speed of the robot."}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Bad Way"}),": Open code, change ",(0,s.jsx)(n.code,{children:"speed = 5.0"})," to ",(0,s.jsx)(n.code,{children:"speed = 10.0"}),", save, rebuild, run."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Good Way"}),": Use ",(0,s.jsx)(n.strong,{children:"Parameters"}),"."]}),"\n"]}),(0,s.jsx)(n.p,{children:"Parameters are settings you can change from the outside."}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"In Code:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class Mover(Node):\n    def __init__(self):\n        super().__init__('mover')\n        # Declare the parameter with a default value\n        self.declare_parameter('max_speed', 5.0)\n\n    def timer_callback(self):\n        # Read the parameter\n        speed = self.get_parameter('max_speed').value\n        self.get_logger().info(f\"Moving at {speed} m/s\")\n"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Running with Parameters:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run my_pkg mover --ros-args -p max_speed:=10.0\n"})})]}),"\n",(0,s.jsxs)(t.A,{level:"expert",language:"english",children:[(0,s.jsx)(n.h2,{id:"advanced-launch-architecture--event-handling",children:"Advanced Launch Architecture & Event Handling"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"The Launch System as a Scripting Engine"})}),(0,s.jsx)(n.p,{children:"The ROS 2 Launch system is not just a list of nodes; it is a complex event-driven programming system.\nFor a Humanoid Robot, you need logic:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.em,{children:'"Only start the Balance Controller IF the IMU driver started successfully."'})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.em,{children:'"If the Vision Node crashes, restart it automatically."'})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.em,{children:'"If the Battery drops below 20%, kill the walking node."'})}),"\n"]}),(0,s.jsx)(n.h3,{id:"1-event-handlers-respawning-nodes",children:"1. Event Handlers (Respawning Nodes)"}),(0,s.jsx)(n.p,{children:"In physical deployments, drivers crash (USB timeouts, loose cables). You cannot have the robot freeze just because a camera glitched."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from launch.actions import RegisterEventHandler\nfrom launch.event_handlers import OnProcessExit\nfrom launch.actions import ExecuteProcess\n\n# Define the node\ncamera_node = Node(\n    package='usb_cam',\n    executable='usb_cam_node_exe',\n    # Enable automatic respawn\n    respawn=True,\n    respawn_delay=2.0\n)\n"})}),(0,s.jsxs)(n.p,{children:["Setting ",(0,s.jsx)(n.code,{children:"respawn=True"})," ensures high availability."]}),(0,s.jsx)(n.h3,{id:"2-substitutions-and-launch-arguments",children:"2. Substitutions and Launch Arguments"}),(0,s.jsx)(n.p,{children:"You rarely hardcode values. You pass them as arguments."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\n\ndef generate_launch_description():\n    # Argument definition\n    use_sim_arg = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='false',\n        description='Use simulation (Gazebo) clock if true'\n    )\n    \n    # Using the argument\n    robot_state_publisher = Node(\n        package='robot_state_publisher',\n        executable='robot_state_publisher',\n        parameters=[{'use_sim_time': LaunchConfiguration('use_sim_time')}]\n    )\n\n    return LaunchDescription([\n        use_sim_arg,\n        robot_state_publisher\n    ])\n"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Command Line Override:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_pkg robot.launch.py use_sim_time:=true\n"})}),(0,s.jsx)(n.h3,{id:"3-dynamic-reconfigure-runtime-parameter-updates",children:"3. Dynamic Reconfigure (Runtime Parameter Updates)"}),(0,s.jsx)(n.p,{children:"You can update parameters while the node is running."}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Enable Parameter Services:"}),"\nBy default, nodes create a service ",(0,s.jsx)(n.code,{children:"/<node_name>/set_parameters"}),"."]}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"CLI Update:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 param set /my_node max_speed 20.0\n"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Handling Updates in Code (C++ vs Python):"}),"\nIn Python, you can register a callback to validate changes (e.g., prevent negative speed)."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"self.add_on_set_parameters_callback(self.parameter_callback)\n\ndef parameter_callback(self, params):\n    for param in params:\n        if param.name == 'max_speed' and param.value < 0.0:\n            return SetParametersResult(successful=False)\n    return SetParametersResult(successful=True)\n"})})]}),"\n",(0,s.jsxs)(t.A,{level:"novice",language:"urdu",children:[(0,s.jsx)(n.h2,{id:"launch-files-aur-parameters",children:"Launch Files Aur Parameters"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Robot Ko Ek Saath Start Karna"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"ros2 run"})," ka masla"]}),"\nAbhi tak hum har node ke liye nayi terminal window khol rahe thay."]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Window 1: Bolne wala"}),"\n",(0,s.jsx)(n.li,{children:"Window 2: Sunne wala"}),"\n",(0,s.jsx)(n.li,{children:"Window 3: Camera"}),"\n",(0,s.jsx)(n.li,{children:"Window 4: Motor"}),"\n"]}),(0,s.jsxs)(n.p,{children:["Haqeeqi robot mein 100 se zyada nodes hotay hain. Aap 100 windows nahi khol saktay. Is liye hum ",(0,s.jsx)(n.strong,{children:"Launch File"})," use karte hain.\nLaunch File ek Python script hoti hai jo sab nodes ko ek sath start kar deti hai."]}),(0,s.jsx)(n.h3,{id:"launch-file-banana",children:"Launch File Banana"}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Apne package mein ",(0,s.jsx)(n.code,{children:"launch"})," naam ka folder banayein."]}),"\n",(0,s.jsxs)(n.li,{children:["Ek file ",(0,s.jsx)(n.code,{children:"my_robot.launch.py"})," banayein."]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from launch import LaunchDescription\nfrom launch_ros.actions import Node\n\ndef generate_launch_description():\n    return LaunchDescription([\n        # Node 1\n        Node(\n            package='my_robot_controller',\n            executable='talker_node',\n            name='my_talker'\n        ),\n        # Node 2\n        Node(\n            package='my_robot_controller',\n            executable='listener_node',\n            name='my_listener'\n        )\n    ])\n"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Chalane Ka Tareeqa:"}),"\nPehle ",(0,s.jsx)(n.code,{children:"setup.py"})," mein batana parega ke launch file kahan hai. (Jaise English section mein bataya gaya).\nPhir:"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_robot_controller my_robot.launch.py\n"})}),(0,s.jsx)(n.p,{children:"Is se saray nodes ek sath chal parengay."}),(0,s.jsx)(n.h3,{id:"parameters-setting-badlna",children:"Parameters (Setting Badlna)"}),(0,s.jsx)(n.p,{children:"Farz karein aap robot ki speed badalna chahte hain."}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ghalat Tareeqa"}),": Code kholein, number badlein, save karein, dobara build karein."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Sahi Tareeqa"}),": ",(0,s.jsx)(n.strong,{children:"Parameters"})," use karein."]}),"\n"]}),(0,s.jsx)(n.p,{children:"Parameters wo settings hain jo aap robot ko chalaate waqt badal saktay hain."}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Code Mein:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"class Mover(Node):\n    def __init__(self):\n        super().__init__('mover')\n        # Default value set ki\n        self.declare_parameter('max_speed', 5.0)\n\n    def timer_callback(self):\n        # Value parhi\n        speed = self.get_parameter('max_speed').value\n        self.get_logger().info(f\"Speed: {speed}\")\n"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Bahar se value dena:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 run my_pkg mover --ros-args -p max_speed:=10.0\n"})})]}),"\n",(0,s.jsxs)(t.A,{level:"expert",language:"urdu",children:[(0,s.jsx)(n.h2,{id:"advanced-launch-architecture",children:"Advanced Launch Architecture"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Launch System: Sirf List Nahi, Logic Hai"})}),(0,s.jsx)(n.p,{children:"ROS 2 Launch system asal mein ek event-driven programming system hai.\nHumanoid Robot ke liye humein logic chahiye hoti hai:"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.em,{children:'"Balance Controller tab tak start na karo jab tak IMU sensor on na ho jaye."'})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.em,{children:'"Agar Vision Node crash ho jaye, to khud bakhud restart ho jaye."'})}),"\n"]}),(0,s.jsx)(n.h3,{id:"1-event-handlers-respawning",children:"1. Event Handlers (Respawning)"}),(0,s.jsx)(n.p,{children:"Physical dunya mein drivers aksar crash ho jatay hain (taar hil gayi, USB disconnect ho gaya). Hum ye bardasht nahi kar saktay ke robot ruk jaye."}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from launch.actions import RegisterEventHandler\nfrom launch_ros.actions import Node\n\ncamera_node = Node(\n    package='usb_cam',\n    executable='usb_cam_node_exe',\n    # Khud bakhud zinda hone ka option\n    respawn=True,\n    respawn_delay=2.0\n)\n"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"respawn=True"})," karne se agar node crash hoga, to system usay 2 second baad dobara chala dega."]}),(0,s.jsx)(n.h3,{id:"2-substitutions-aur-arguments",children:"2. Substitutions aur Arguments"}),(0,s.jsxs)(n.p,{children:["Hum values ko hardcode nahi karte. Hum ",(0,s.jsx)(n.strong,{children:"Arguments"})," use karte hain."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"from launch.actions import DeclareLaunchArgument\nfrom launch.substitutions import LaunchConfiguration\n\ndef generate_launch_description():\n    # Argument define kiya\n    use_sim_arg = DeclareLaunchArgument(\n        'use_sim_time',\n        default_value='false',\n        description='Agar simulation hai to true karein'\n    )\n    \n    # Istemal kiya\n    node = Node(\n        package='pkg',\n        executable='exec',\n        parameters=[{'use_sim_time': LaunchConfiguration('use_sim_time')}]\n    )\n\n    return LaunchDescription([\n        use_sim_arg,\n        node\n    ])\n"})}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Command Line se Argument Dena:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 launch my_pkg robot.launch.py use_sim_time:=true\n"})}),(0,s.jsx)(n.h3,{id:"3-dynamic-reconfigure-chaltay-hue-settings-badlna",children:"3. Dynamic Reconfigure (Chaltay Hue Settings Badlna)"}),(0,s.jsx)(n.p,{children:"Aap chaltay hue node ki settings badal saktay hain."}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"CLI Update:"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"ros2 param set /my_node max_speed 20.0\n"})}),(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Python Callback:"}),"\nAap code mein check laga saktay hain ke ghalat value na set ho."]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:"self.add_on_set_parameters_callback(self.parameter_callback)\n\ndef parameter_callback(self, params):\n    for param in params:\n        # Agar speed negative ho to reject kar do\n        if param.name == 'max_speed' and param.value < 0.0:\n            return SetParametersResult(successful=False)\n    return SetParametersResult(successful=True)\n"})})]}),"\n",(0,s.jsx)(l.A,{questions:[{question:"What is the command to start multiple nodes defined in a Python script?",options:["ros2 run","ros2 start","ros2 launch","ros2 init"],correctAnswer:2},{question:"How can you change a node's parameter (e.g., speed) from the command line without recompiling?",options:["Edit the source code","Use --ros-args -p param_name:=value","It is impossible","Delete the package"],correctAnswer:1},{question:"Urdu: Agar aap chahte hain ke node crash hone par khud restart ho jaye, to launch file mein kya likhenge?",options:["restart=True","respawn=True","loop=True","again=True"],correctAnswer:1}]})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}}}]);